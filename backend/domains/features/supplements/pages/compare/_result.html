<!-- Comparison Result Partial -->
<div class="space-y-6">
    <!-- Match Percentage - 카드 형태로 시각화 -->
    <div class="text-center p-6 rounded-3xl bg-gradient-to-br 
                {% if result.match_percentage >= 80 %}from-emerald-50 to-teal-50 dark:from-emerald-900/30 dark:to-teal-900/30 border-emerald-200 dark:border-emerald-700
                {% elif result.match_percentage >= 50 %}from-amber-50 to-orange-50 dark:from-amber-900/30 dark:to-orange-900/30 border-amber-200 dark:border-amber-700
                {% else %}from-rose-50 to-pink-50 dark:from-rose-900/30 dark:to-pink-900/30 border-rose-200 dark:border-rose-700{% endif %}
                border-2 shadow-lg">
        <div class="text-6xl font-extrabold mb-2
                    {% if result.match_percentage >= 80 %}text-emerald-600 dark:text-emerald-400
                    {% elif result.match_percentage >= 50 %}text-amber-600 dark:text-amber-400
                    {% else %}text-rose-600 dark:text-rose-400{% endif %}">
            {{ result.match_percentage }}%
        </div>
        <p class="text-gray-700 dark:text-gray-300 font-bold text-lg">성분 일치율</p>
        {% if result.match_percentage >= 80 %}
        <p class="text-sm text-emerald-600 dark:text-emerald-400 mt-2">✅ 매우 유사한 성분 구성</p>
        {% elif result.match_percentage >= 50 %}
        <p class="text-sm text-amber-600 dark:text-amber-400 mt-2">⚠️ 부분적으로 유사</p>
        {% else %}
        <p class="text-sm text-rose-600 dark:text-rose-400 mt-2">❌ 성분 구성이 다릅니다</p>
        {% endif %}
    </div>

    <!-- Side-by-Side Comparison -->
    <div class="grid md:grid-cols-2 gap-4">
        <!-- Product A Info -->
        <div class="p-4 rounded-xl bg-sky-50 dark:bg-sky-900/20 border border-sky-200 dark:border-sky-800">
            <h3 class="font-semibold text-sky-700 dark:text-sky-300 mb-2">
                {{ result.product_a.brand }}
            </h3>
            <p class="text-gray-900 dark:text-white">{{ result.product_a.name }}</p>
            <p class="text-sm text-gray-500">{{ result.product_a.serving_size }}</p>
        </div>

        <!-- Product B Info -->
        <div class="p-4 rounded-xl bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800">
            <h3 class="font-semibold text-purple-700 dark:text-purple-300 mb-2">
                {{ result.product_b.brand }}
            </h3>
            <p class="text-gray-900 dark:text-white">{{ result.product_b.name }}</p>
            <p class="text-sm text-gray-500">{{ result.product_b.serving_size }}</p>
        </div>
    </div>

    <!-- Matching Ingredients - 초록색 강조 -->
    {% if result.matching_ingredients %}
    <div class="p-5 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-200 dark:border-emerald-700 shadow-sm">
        <h4 class="font-bold text-emerald-700 dark:text-emerald-300 mb-3 flex items-center gap-2">
            <span class="text-xl">✅</span>
            <span>동일 성분 ({{ result.matching_ingredients|length }}개)</span>
        </h4>
        <div class="flex flex-wrap gap-2">
            {% for ingredient in result.matching_ingredients %}
            <span
                class="px-3 py-1.5 text-sm font-medium rounded-full bg-emerald-100 dark:bg-emerald-800/50 text-emerald-700 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-600">
                {{ ingredient }}
            </span>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Different Ingredients - 빨간색 강조 -->
    {% if result.different_ingredients %}
    <div class="p-5 rounded-2xl bg-rose-50 dark:bg-rose-900/20 border-2 border-rose-200 dark:border-rose-700 shadow-sm">
        <h4 class="font-bold text-rose-700 dark:text-rose-300 mb-3 flex items-center gap-2">
            <span class="text-xl">❌</span>
            <span>차이 나는 성분 ({{ result.different_ingredients|length }}개)</span>
        </h4>
        <div class="flex flex-wrap gap-2">
            {% for ingredient in result.different_ingredients %}
            <span
                class="px-3 py-1.5 text-sm font-medium rounded-full bg-rose-100 dark:bg-rose-800/50 text-rose-700 dark:text-rose-300 border border-rose-200 dark:border-rose-600">
                {{ ingredient }}
            </span>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>