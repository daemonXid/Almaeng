{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "가격 검색" %} | ALMAENG{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <!-- Header -->
    <header class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">
            🛍️ {% trans "실시간 가격 검색" %}
        </h1>
        <p class="text-gray-600 dark:text-gray-400">
            {% trans "네이버 쇼핑에서 최저가를 찾아보세요" %}
        </p>
    </header>

    <!-- Search Input -->
    <section class="relative mb-8">
        <input
            type="search"
            name="q"
            placeholder="{% trans '예: 비타민 D, 센트룸, 오메가3...' %}"
            class="w-full px-6 py-4 text-lg rounded-2xl border-2 border-gray-200 dark:border-gray-700
                   bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                   focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 dark:focus:ring-emerald-800
                   transition-all duration-200 outline-none"
            hx-get="{% url 'prices:search_results' %}"
            hx-trigger="keyup changed delay:500ms"
            hx-target="#search-results"
            hx-indicator="#search-indicator"
            autofocus
        >
        <!-- Search Indicator -->
        <div id="search-indicator" class="htmx-indicator absolute right-4 top-1/2 -translate-y-1/2">
            <svg class="animate-spin h-5 w-5 text-emerald-500" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
            </svg>
        </div>
    </section>

    <!-- Platform Badge -->
    <div class="flex items-center justify-center gap-2 mb-6">
        <span class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium
                     bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400">
            <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
            네이버 쇼핑 API
        </span>
    </div>

    <!-- Search Results -->
    <section id="search-results">
        <!-- Initial state -->
        <div class="text-center py-12">
            <span class="text-6xl mb-4 block">🔍</span>
            <p class="text-gray-500 dark:text-gray-400">{% trans "검색 결과가 여기에 표시됩니다" %}</p>
        </div>
    </section>

    <!-- API Info -->
    <aside class="mt-12 p-4 rounded-xl bg-gray-100 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700">
        <h2 class="font-semibold text-gray-700 dark:text-gray-300 mb-2">ℹ️ API 정보</h2>
        <ul class="text-sm text-gray-600 dark:text-gray-400 space-y-1">
            <li>• <strong>네이버 쇼핑 API</strong>: 실시간 가격 검색 (하루 25,000회)</li>
            <li>• 결과는 네이버 쇼핑 검색 결과와 동일합니다</li>
            <li>• 가격은 판매자에 따라 변동될 수 있습니다</li>
        </ul>
    </aside>
</div>
{% endblock %}
